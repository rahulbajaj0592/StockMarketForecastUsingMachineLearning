(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[21],{1250:function(e,t,a){"use strict";var n=a(19),i=a.n(n),r=a(26),o=a(3),c=a(15),s=a(13),l=a(14),u=a(0),h=a.n(u),p=a(37),m=a(139),b=a.n(m),f=a(10),w=a(1392),d=a(125),g=a.n(d),v=a(33),k=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(Object(w.a)(Error)),S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(Object(w.a)(Error)),j=function(){function e(){Object(o.a)(this,e)}return Object(f.a)(e,null,[{key:"get",value:function(){var t=Object(r.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.a.current,n=a.commandLine,r=a.userMapboxToken,e.token&&e.commandLine===n.toLowerCase()){t.next=10;break}if(""===r){t.next=6;break}e.token=r,t.next=9;break;case 6:return t.next=8,this.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:e.token=t.sent;case 9:e.commandLine=n.toLowerCase();case 10:return t.abrupt("return",e.token);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetchToken",value:function(){var e=Object(r.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(t);case 3:if(n=e.sent,null!=(r=n.data[a])&&""!==r){e.next=7;break}throw new Error('Missing token "'.concat(a,'"'));case 7:return e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new S("".concat(e.t0.message," (").concat(t,")"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();j.token=void 0,j.commandLine=void 0,j.isRunningLocal=function(){var e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e};var O=a(117),x=function(e){var t=e.error,a=e.width,n=e.deltaType;return t instanceof k?h.a.createElement(O.a,{width:a,name:"No Mapbox token provided",message:h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,"To use ",h.a.createElement("code",null,"st.",n)," or ",h.a.createElement("code",null,"st.map")," you need to set up a Mapbox access token."),h.a.createElement("p",null,"To get a token, create an account at"," ",h.a.createElement("a",{href:"https://mapbox.com"},"https://mapbox.com"),". It's free for moderate usage levels!"),h.a.createElement("p",null,"Once you have a token, just set it using the Streamlit config option ",h.a.createElement("code",null,"mapbox.token")," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."),h.a.createElement("p",null,"See"," ",h.a.createElement("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options"},"our documentation")," ","for more info on how to set config options."))}):t instanceof S?h.a.createElement(O.a,{width:a,name:"Error fetching Streamlit Mapbox token",message:h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,"This app requires an internet connection."),h.a.createElement("p",null,"Please check your connection and try again."),h.a.createElement("p",null,"If you think this is a bug, please file bug report"," ",h.a.createElement("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose"},"here"),"."))}):h.a.createElement(O.a,{width:a,name:"Error fetching Streamlit Mapbox token",message:t.message})},E=a(214);t.a=function(e){return function(t){var a=function(a){function n(a){var l;return Object(o.a)(this,n),(l=Object(c.a)(this,Object(s.a)(n).call(this,a))).initMapboxToken=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get();case 3:t=e.sent,l.setState({mapboxToken:t,isFetching:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l.setState({mapboxTokenError:e.t0,isFetching:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),l.render=function(){var a=l.state,n=a.mapboxToken,i=a.mapboxTokenError,r=a.isFetching,o=l.props.width;return i?h.a.createElement(x,{width:o,error:i,deltaType:e}):r?h.a.createElement(E.a,{element:Object(p.g)("Loading...").get("alert"),width:o}):h.a.createElement(t,Object.assign({mapboxToken:n},l.props))},l.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},l.initMapboxToken(),l}return Object(l.a)(n,a),n}(u.PureComponent);return a.displayName="withMapboxToken(".concat(t.displayName||t.name,")"),b()(a,t)}}},1414:function(e,t){},1419:function(e,t){},1421:function(e,t){},1429:function(e,t){},1449:function(e,t){},2066:function(e,t,a){},2389:function(e,t,a){"use strict";a.r(t);var n=a(65),i=a(3),r=a(10),o=a(15),c=a(13),s=a(14),l=a(21),u=a(0),h=a.n(u),p=a(1409),m=a.n(p),b=a(2043),f=a.n(b),w=a(1398),d=a(1066),g=a(2079),v=a(1522),k=a(1517),S=a(2067),j=a(1113),O=a(219),x=a(1250),E=(a(1408),a(2066),{classes:Object(l.a)({},d,{},k,{},v)});Object(j.registerLoaders)([S.CSVLoader]);var y=new g.JSONConverter({configuration:E}),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={viewState:{bearing:0,pitch:0,zoom:11},initialized:!1,initialViewState:{}},a.componentDidMount=function(){a.setState({initialized:!0})},a.createTooltip=function(e){var t=a.props.element.get("tooltip");return!!(e&&e.object&&t)&&((t=JSON.parse(t)).html?t.html=a.interpolate(e,t.html):t.text=a.interpolate(e,t.text),t)},a.interpolate=function(e,t){var a=t.match(/{(.*?)}/g);return a&&a.forEach((function(a){var n=a.substring(1,a.length-1);e.object.hasOwnProperty(n)&&(t=t.replace(a,e.object[n]))})),t},a.onViewStateChange=function(e){var t=e.viewState;a.setState({viewState:t})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=t.getDeckObject(this.props),a=this.state.viewState;return h.a.createElement("div",{className:"stDeckGlJsonChart",style:{height:e.initialViewState.height,width:e.initialViewState.width}},h.a.createElement(m.a,{viewState:a,onViewStateChange:this.onViewStateChange,height:e.initialViewState.height,width:e.initialViewState.width,layers:this.state.initialized?e.layers:[],getTooltip:this.createTooltip,controller:!0},h.a.createElement(w.StaticMap,{height:e.initialViewState.height,width:e.initialViewState.width,mapStyle:e.mapStyle?"string"===typeof e.mapStyle?e.mapStyle:e.mapStyle[0]:void 0,mapboxApiAccessToken:this.props.mapboxToken})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var i=t.getDeckObject(e);if(!f()(i.initialViewState,a.initialViewState)){var r=Object.keys(i.initialViewState).reduce((function(e,t){return i.initialViewState[t]===a.initialViewState[t]?e:Object(l.a)({},e,Object(n.a)({},t,i.initialViewState[t]))}),{});return{viewState:Object(l.a)({},a.viewState,{},r),initialViewState:i.initialViewState}}return null}}]),t}(u.PureComponent);V.getDeckObject=function(e){var t=e.element,a=e.width,n=e.height,i=t.get("useContainerWidth"),r=JSON.parse(t.get("json"));return n?(r.initialViewState.height=n,r.initialViewState.width=a):(r.initialViewState.height||(r.initialViewState.height=500),i&&(r.initialViewState.width=a)),delete r.views,y.convert(r)};var T=Object(x.a)("st.pydeck_chart")(Object(O.a)(V));a.d(t,"default",(function(){return T}))}}]);
//# sourceMappingURL=21.52d7045b.chunk.js.map