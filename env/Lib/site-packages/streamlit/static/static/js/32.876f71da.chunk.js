(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[32],{2359:function(e,t,a){},2408:function(e,t,a){"use strict";a.r(t);var r=a(21),n=a(3),s=a(15),l=a(13),o=a(14),c=a(125),i=a.n(c),d=a(2384),u=a(64),p=a(160),m=a(0),g=a.n(m),v=a(5),f=(a(2359),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).currentUploadCanceller=void 0,a.componentDidUpdate=function(e){e.disabled!==a.props.disabled&&a.props.disabled&&a.reset()},a.dropHandler=function(e,t,r){var n=a.props.element.get("maxUploadSizeMb");if(t.length>0){var s="".concat(t[0].type," files are not allowed");a.setState({status:"ERROR",errorMessage:s})}else{var l=1024*n*1024,o=!0,c=!1,d=void 0;try{for(var u,p=e[Symbol.iterator]();!(o=(u=p.next()).done);o=!0){if(u.value.size>l){var m="The max file size allowed is ".concat(n,"MB");return void a.setState({status:"ERROR",errorMessage:m})}}}catch(g){c=!0,d=g}finally{try{o||null==p.return||p.return()}finally{if(c)throw d}}a.setState({acceptedFiles:e,status:"UPLOADING"}),a.currentUploadCanceller=i.a.CancelToken.source(),a.props.uploadClient.uploadFiles(a.props.element.get("id"),e,void 0,a.currentUploadCanceller.token).then((function(){a.currentUploadCanceller=void 0,a.setState({status:"UPLOADED"})})).catch((function(e){i.a.isCancel(e)?(a.currentUploadCanceller=void 0,a.setState({status:"UPLOADED"})):a.setState({status:"ERROR",errorMessage:e?e.toString():"Unknown error"})}))}},a.reset=function(){a.setState({status:"READY",errorMessage:void 0,acceptedFiles:[]})},a.renderErrorMessage=function(){var e=a.state.errorMessage;return g.a.createElement("div",{className:"uploadStatus uploadError"},g.a.createElement("span",{className:"body"},g.a.createElement(u.a,{className:"icon",type:"warning"})," ",e),g.a.createElement(v.Button,{color:"link",onClick:a.reset},"OK"))},a.renderUploadingMessage=function(){return g.a.createElement("div",{className:"uploadStatus uploadProgress"},g.a.createElement("span",{className:"body"},g.a.createElement(v.Spinner,{color:"secondary",size:"sm"})," Uploading..."),g.a.createElement(v.Button,{color:"link",onClick:a.cancelCurrentUpload},"Cancel"))},a.cancelCurrentUpload=function(){null!=a.currentUploadCanceller&&(a.currentUploadCanceller.cancel(),a.currentUploadCanceller=void 0)},a.renderFileUploader=function(){var e=a.state,t=e.status,n=e.errorMessage,s=a.props.element,l=s.get("type").toArray().map((function(e){return"."+e})),o=s.get("multipleFiles"),c=p.d,i="";return"UPLOADED"===t&&((c=Object(r.a)({},c)).ContentMessage=Object(r.a)({},c.ContentMessage),c.ContentMessage.style=Object(r.a)({},c.ContentMessage.style),c.ContentMessage.style.visibility="hidden",c.ContentMessage.style.overflow="hidden",c.ContentMessage.style.height="0.625rem",c.ContentSeparator=Object(r.a)({},c.ContentSeparator),c.ContentSeparator.style.visibility="hidden",i=o?a.state.acceptedFiles.map((function(e){return e.name})).join(", "):a.state.acceptedFiles[0].name),g.a.createElement(g.a.Fragment,null,"UPLOADED"===t&&g.a.createElement("div",{className:"uploadOverlay uploadDone"},g.a.createElement("span",{className:"body"},i)),g.a.createElement(d.a,{onDrop:a.dropHandler,errorMessage:n,accept:0===l.length?void 0:l,disabled:a.props.disabled,overrides:c,multiple:o}))},a.render=function(){var e=a.state.status,t=a.props.element.get("label");return g.a.createElement("div",{className:"Widget stFileUploader"},g.a.createElement("label",null,t),"ERROR"===e?a.renderErrorMessage():"UPLOADING"===e?a.renderUploadingMessage():a.renderFileUploader())},a.state={status:"READY",errorMessage:void 0,acceptedFiles:[]},a}return Object(o.a)(t,e),t}(g.a.PureComponent));a.d(t,"default",(function(){return f}))}}]);
//# sourceMappingURL=32.876f71da.chunk.js.map